import dotenv from 'dotenv';
import { REST, Routes } from 'discord.js';

dotenv.config();
console.log('ğŸ§ª Loaded ENV:', process.env.BOT_TOKEN, process.env.APPLICATION_ID);

const APPLICATION_ID = process.env.APPLICATION_ID;
const GUILD_ID = process.env.GUILD_ID; // Optional for testing
const BOT_TOKEN = process.env.BOT_TOKEN;

const commands = [
  {
    name: 'bestie',
    description: 'Summon your bestie ğŸ’…',
  },
  {
    name: 'spill',
    description: 'Spill the tea, bestie â˜•ğŸ‘€',
  },
  {
    name: 'hug',
    description: 'Give someone a big and warm hug ğŸ¤—ğŸ’–',
    options: [
      {
        name: 'user',
        description: 'The user you want to hug',
        type: 6,
        required: true,
      },
    ],
  },
  {
    name: 'advice',
    description: 'Let bestie give you life advice ğŸ’€',
  },
  {
    name: 'vibecheck',
    description: 'Check the current vibe ğŸ˜Œ',
  },
  {
    name: 'selfiecheck',
    description: 'You ATE that ğŸ‘‘',
  },
  {
    name: 'affirmation',
    description: 'Get your daily affirmation ğŸ’–',
  },
];

const rest = new REST({ version: '10' }).setToken(BOT_TOKEN);

(async () => {
  try {
    console.log('ğŸ“¡ Registering commands...');

    await rest.put(
      Routes.applicationCommands(APPLICATION_ID),
      { body: commands }
    );

    console.log('âœ… Commands registered globally!');
  } catch (err) {
    console.error('âŒ Failed to register commands:', err);
  }
})();
